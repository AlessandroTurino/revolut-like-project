# Day 3 - 22/10/2025

## Scostamenti dal piano
- Nessuno rilevato: il lavoro su seed e popolamento DB è stato completato nei tempi previsti.

## Attività svolte
- Avviato PostgreSQL via Docker Compose e applicate tutte le migrazioni schema (`otp_channels`, `users`, `accounts`, `transactions`, `otp_audits`, `security_logs`).
- Creati e documentati gli script seed Python per ogni tabella (`backend/db/seeds/<table>_seed.py`) con inserimenti idempotenti, più orchestratore `run_all.py` per lanciare tutti i seed in sequenza.
- Popolati i dati iniziali: canali OTP (SMS, EMAIL), utente demo Alessandro Turino con preferenza EMAIL e conto EUR (`balance: 1000`, `name: a.turino`).
- Aggiornata la guideline Database per richiedere un file seed dedicato per ciascuna tabella.
- Implementati gli endpoint FastAPI `/health`, `/accounts`, `/transactions` (GET/POST) con pool asincrono verso PostgreSQL e logica di idempotenza lato server.
- Scritta la prima suite `pytest` (HTTPX + ASGI) per verificare elenco conti, filtri transazioni e comportamento idempotente del `POST /transactions`, documentata nel README.
- Automatizzate migrazioni e seed tramite `python -m backend.db.manage {migrate|seed|bootstrap}`.
- Avviata la progettazione di un microservizio interno per la generazione di OTP via email e la simulazione di invio SMS.
- Redatto il documento di collaudo `docs/test-plan-saturday.md` per la sessione di test di sabato.

## Attività in sospeso
- Definire le policy RLS e gli eventuali seed aggiuntivi (transazioni, audit, log) per i prossimi scenari di test.
- Integrare Keycloak/OIDC e proteggere gli endpoint con la verifica dei token come previsto dal piano Giorno 3.
- Estendere i test automatici a casi limite (error handling, validazioni) e predisporre pipeline CI per l'esecuzione continua.
- Prototipare il microservizio OTP (email reali, SMS simulati) e integrarlo con il backend FastAPI.
- Organizzare ed eseguire la sessione di test end-to-end di sabato seguendo `docs/test-plan-saturday.md`.
